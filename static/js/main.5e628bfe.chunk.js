(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{100:function(t,e,a){},101:function(t,e,a){},128:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(10),o=a.n(s);a(100),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(101);var c,d,r=a(23),l=a(179),u=a(166),j=a(167),f=a(3),b=i.a.memo((function(t){var e=Object(n.useState)(""),a=Object(r.a)(e,2),i=a[0],s=a[1],o=Object(n.useState)(!1),c=Object(r.a)(o,2),d=c[0],b=c[1],h=function(){var e=i.trim();e?(t.addItem(e),s("")):b(!0)},O=d&&Object(f.jsx)("div",{style:{color:"red"},children:"Title is required!"});return Object(f.jsxs)("div",{children:[Object(f.jsx)(l.a,{size:"small",variant:"outlined",error:!!d,value:i,placeholder:"Enter title...",onChange:function(t){b(!1),s(t.currentTarget.value)},onKeyPress:function(t){!1!==d&&b(!1),"Enter"===t.key&&h()},label:"Title",helperText:O,disabled:t.disabled}),Object(f.jsx)(u.a,{onClick:h,color:"primary",size:"small",disabled:t.disabled,children:Object(f.jsx)(j.a,{fontSize:"large"})})]})})),h=i.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(r.a)(e,2),i=a[0],s=a[1],o=Object(n.useState)(t.title),c=Object(r.a)(o,2),d=c[0],u=c[1];return i?Object(f.jsx)(l.a,{style:{width:"150px"},value:d,autoFocus:!0,onBlur:function(){s(!1),t.setNewTitle(d)},onChange:function(t){u(t.currentTarget.value)}}):Object(f.jsx)("span",{onDoubleClick:function(){!t.disabled&&s(!0)},children:t.title})})),O=a(130),p=a(185),m=a(169),g=a(131),k=a(168),x=a(181),y=a(56),C=a.n(y),v=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"1860b8e8-5b0f-42e3-b73c-7abd28b78fff"}}),I=function(t){return v.post("/auth/login",t)},T=function(){return v.get("/auth/me")},S=function(){return v.delete("/auth/login")},A=function(){return v.get("todo-lists")},w=function(t){return v.post("todo-lists",{title:t})},L=function(t){return v.delete("todo-lists/".concat(t))},E=function(t,e){return v.put("todo-lists/".concat(t),{title:e})};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(c||(c={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(d||(d={}));var F,z=i.a.memo((function(t){var e=t.task,a=t.removeTask,i=t.changeTaskStatus,s=t.changeTasksTitle,o=t.todolistId,d=Object(n.useCallback)((function(t){var a=t.currentTarget.checked;i(e.id,a?c.Completed:c.New,o)}),[e.id,o]),r=Object(n.useCallback)((function(t){s(e.id,t)}),[s,e.id]),l="loading"===e.entityStatus;return Object(f.jsxs)("div",{className:e.status===c.Completed?"is-done":"",children:[Object(f.jsx)(x.a,{color:"primary",onChange:d,checked:e.status===c.Completed,disabled:l}),Object(f.jsx)(h,{setNewTitle:r,title:e.title,disabled:l}),Object(f.jsx)(u.a,{onClick:function(){return a(e.id)},disabled:l,children:Object(f.jsx)(k.a,{fontSize:"small"})})]},e.id)})),D=a(14),N=function(t,e){t.messages.length?e(Z({error:t.messages[0]})):e(Z({error:"Some error occurred"})),e(W({status:"failed"}))},P=function(t,e){e(Z({error:t.message})),e(W({status:"failed"}))},R=a(25),U=Object(R.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),q=U.reducer,B=U.actions.setIsLoggedInAC,H=Object(R.c)({name:"app",initialState:{status:"loading",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setIsInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),K=H.reducer,M=H.actions,W=M.setAppStatusAC,Z=M.setAppErrorAC,J=M.setIsInitializedAC,Y=Object(R.c)({name:"todolists",initialState:[],reducers:{setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(D.a)(Object(D.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},RemoveTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));a>-1&&t.splice(a,1)},AddTodoListAC:function(t,e){t.unshift(Object(D.a)(Object(D.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},ChangeTodolistTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].title=e.payload.title},ChangeTodoListFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].filter=e.payload.filter},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.entityStatus}}}),$=Y.reducer,_=Y.actions,G=_.setTodolistsAC,V=_.RemoveTodolistAC,Q=_.AddTodoListAC,X=_.ChangeTodolistTitleAC,tt=_.ChangeTodoListFilterAC,et=_.changeTodolistEntityStatusAC,at=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"1860b8e8-5b0f-42e3-b73c-7abd28b78fff"}}),nt=function(t){return at.get("/todo-lists/".concat(t,"/tasks"))},it=function(t,e){return at.post("/todo-lists/".concat(t,"/tasks"),{title:e})},st=function(t,e){return at.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},ot=function(t,e,a){return at.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},ct=Object(R.b)("tasks/fetchTasks",(function(t,e){return e.dispatch(W({status:"loading"})),nt(t).then((function(a){var n=a.data.items;return e.dispatch(W({status:"succeeded"})),{tasks:n,todolistId:t}}))})),dt=Object(R.b)("tasks/removeTask",(function(t,e){return e.dispatch(W({status:"loading"})),e.dispatch(bt({taskId:t.taskId,entityStatus:"loading",todolistId:t.todolistId})),st(t.todolistId,t.taskId).then((function(a){return e.dispatch(W({status:"succeeded"})),{taskID:t.taskId,todolistId:t.todolistId}}))})),rt=Object(R.c)({name:"tasks",initialState:{},reducers:{addTaskAC:function(t,e){t[e.payload.todoListId].unshift(Object(D.a)(Object(D.a)({},e.payload),{},{entityStatus:"idle"}))},changeTaskTitleAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(D.a)(Object(D.a)({},a[n]),{},{title:e.payload.title}))},changeTaskStatusAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(D.a)(Object(D.a)({},a[n]),{},{status:e.payload.status}))},changeTaskEntityStatusAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(D.a)(Object(D.a)({},a[n]),{},{entityStatus:e.payload.entityStatus}))}},extraReducers:function(t){t.addCase(Q,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(V,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(G,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))})),t.addCase(ct.fulfilled,(function(t,e){t[e.payload.todolistId]=e.payload.tasks.map((function(t){return Object(D.a)(Object(D.a)({},t),{},{entityStatus:"idle"})}))})),t.addCase(dt.fulfilled,(function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskID}));n>-1&&a.splice(n,1)}))}}),lt=rt.actions,ut=lt.addTaskAC,jt=lt.changeTaskTitleAC,ft=lt.changeTaskStatusAC,bt=lt.changeTaskEntityStatusAC,ht=rt.reducer;!function(t){t[t.success=0]="success",t[t.error=1]="error",t[t.captcha=10]="captcha"}(F||(F={}));var Ot=a(17),pt=i.a.memo((function(t){var e=Object(Ot.b)();Object(n.useEffect)((function(){e(ct(t.id))}),[]);var a=t.tasks;"active"===t.filter&&(a=a.filter((function(t){return t.status===c.New}))),"completed"===t.filter&&(a=a.filter((function(t){return t.status===c.Completed})));var i=Object(n.useCallback)((function(e){t.addTask(e,t.id)}),[t.addTask,t.id]),s=Object(n.useCallback)((function(e){t.removeTask(e,t.id)}),[t.removeTask,t.id]),o=Object(n.useCallback)((function(e,a){t.changeTaskStatus(e,a,t.id)}),[t.changeTaskStatus,t.id]),d=Object(n.useCallback)((function(e,a){t.changeTasksTitle(e,a,t.id)}),[t.changeTasksTitle,t.id]),r=a.map((function(e){return Object(f.jsx)(z,{task:e,removeTask:s,changeTaskStatus:o,changeTasksTitle:d,todolistId:t.id})})),l=Object(n.useCallback)((function(){return t.changeFilter("all",t.id)}),[t.changeFilter,t.id]),j=Object(n.useCallback)((function(){return t.changeFilter("active",t.id)}),[t.changeFilter,t.id]),x=Object(n.useCallback)((function(){return t.changeFilter("completed",t.id)}),[t.changeFilter,t.id]),y="all"===t.filter?"secondary":"primary",C="active"===t.filter?"secondary":"primary",v="completed"===t.filter?"secondary":"primary",I=Object(n.useCallback)((function(e){t.changeTodolistTitle(e,t.id)}),[t.changeTodolistTitle,t.id]);return Object(f.jsxs)("div",{children:[Object(f.jsxs)(O.a,{align:"center",variant:"h6",style:{fontWeight:"bold"},children:[Object(f.jsx)(h,{title:t.title,setNewTitle:I,disabled:"loading"===t.entityStatus}),Object(f.jsx)(u.a,{onClick:function(){t.removeTodolist(t.id)},disabled:"loading"===t.entityStatus,children:Object(f.jsx)(k.a,{})})]}),Object(f.jsx)(b,{addItem:i,disabled:"loading"===t.entityStatus}),Object(f.jsx)(p.a,{children:r}),Object(f.jsx)("div",{children:Object(f.jsxs)(m.a,{variant:"contained",size:"small",disableElevation:!0,children:[Object(f.jsx)(g.a,{color:y,onClick:l,children:"All"}),Object(f.jsx)(g.a,{color:C,onClick:j,children:"Active"}),Object(f.jsx)(g.a,{color:v,onClick:x,children:"Completed"})]})})]})})),mt=a(170),gt=a(129),kt=a(173),xt=a(174),yt=a(175),Ct=a(177),vt=a(178),It=a(176),Tt=(a(126),a(26)),St=a(48),At=Object(Tt.b)({tasks:ht,todolists:$,app:K,auth:q}),wt=Object(R.a)({reducer:At,middleware:function(t){return t().prepend(St.a)}}),Lt=Ot.c;window.store=wt;var Et=a(183),Ft=a(180),zt=i.a.forwardRef((function(t,e){return Object(f.jsx)(Ft.a,Object(D.a)({elevation:6,ref:e,variant:"filled"},t))}));function Dt(){var t=Lt((function(t){return t.app.error})),e=Object(Ot.b)(),a=function(t,a){"clickaway"!==a&&e(Z({error:null}))};return Object(f.jsx)(Et.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(f.jsx)(zt,{onClose:a,severity:"error",children:t})})}var Nt=a(8),Pt=function(t){var e=Object(Ot.c)((function(t){return t.auth.isLoggedIn})),a=Object(Ot.b)();return Object(n.useEffect)((function(){e&&a((function(t){t(W({status:"loading"})),A().then((function(e){t(G({todolists:e.data})),t(W({status:"succeeded"}))})).catch((function(e){P(e,t)}))}))}),[]),e?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(mt.a,{container:!0,style:{padding:"29px 0"},children:Object(f.jsx)(b,{addItem:t.addTodolist})}),Object(f.jsx)(mt.a,{container:!0,spacing:4,children:t.todoListsComponents})]}):Object(f.jsx)(Nt.a,{to:"/login"})},Rt=a(184),Ut=a(165),qt=a(171),Bt=a(172),Ht=a(85),Kt=function(){var t=Object(Ot.b)(),e=Object(Ot.c)((function(t){return t.auth.isLoggedIn})),a=Object(Ht.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required email",t.password?t.password.length<3&&(e.password="Invalid password"):e.password="Required password",e},onSubmit:function(e){var n;t((n=e,function(t){t(W({status:"loading"})),I(n).then((function(e){0===e.data.resultCode?(t(W({status:"succeeded"})),t(B({value:!0}))):N(e.data,t)})).catch((function(e){P(e,t)}))})),a.resetForm()}});return e?Object(f.jsx)(Nt.a,{to:"/"}):Object(f.jsx)(mt.a,{container:!0,justifyContent:"center",children:Object(f.jsx)(mt.a,{item:!0,justifyContent:"center",children:Object(f.jsx)("form",{onSubmit:a.handleSubmit,children:Object(f.jsxs)(Rt.a,{children:[Object(f.jsxs)(Ut.a,{children:[Object(f.jsxs)("p",{children:["To log in get registered",Object(f.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(f.jsx)("p",{children:"or use common test account credentials:"}),Object(f.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(f.jsx)("p",{children:"Password: free"})]}),Object(f.jsxs)(qt.a,{children:[Object(f.jsx)(l.a,Object(D.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?Object(f.jsx)("div",{style:{color:"red"},children:a.errors.email}):null,Object(f.jsx)(l.a,Object(D.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?Object(f.jsx)("div",{style:{color:"red"},children:a.errors.password}):null,Object(f.jsx)(Bt.a,{label:"Remember me",control:Object(f.jsx)(x.a,{})}),Object(f.jsx)(g.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})};var Mt=function(){Object(n.useEffect)((function(){a((function(t){T().then((function(e){0===e.data.resultCode&&t(B({value:!0}))})).finally((function(){t(J({isInitialized:!0}))}))}))}),[]);var t=Object(Ot.c)((function(t){return t.todolists})),e=Object(Ot.c)((function(t){return t.tasks})),a=Object(Ot.b)(),i=Lt((function(t){return t.app.status})),s=Lt((function(t){return t.app.isInitialized})),o=Lt((function(t){return t.auth.isLoggedIn})),c=Object(n.useCallback)((function(t,e){a(function(t,e){return function(a){a(W({status:"loading"})),it(t,e).then((function(t){if(t.data.resultCode===F.success){var e=t.data.data.item;a(ut(e))}else N(t.data,a)})).catch((function(t){P(t,a)})).finally((function(){a(W({status:"idle"}))}))}}(e,t))}),[a]),d=Object(n.useCallback)((function(t,e){a(dt({todolistId:e,taskId:t}))}),[a]),r=Object(n.useCallback)((function(t,e){a(tt({filter:t,todolistId:e}))}),[a]),l=Object(n.useCallback)((function(t,e){a(function(t,e){return function(a){a(W({status:"loading"})),E(t,e).then((function(n){n.data.resultCode===F.success?(a(X({todolistId:t,title:e})),a(W({status:"succeeded"}))):N(n.data,a)})).catch((function(t){P(t,a)}))}}(e,t))}),[a]),j=Object(n.useCallback)((function(t,e,n){a(function(t,e,a){return function(n,i){var s=i().tasks[a].find((function(e){return e.id===t}));if(s){var o={title:s.title,status:e,description:s.description,priority:s.priority,startDate:s.startDate,deadline:s.deadline};n(W({status:"loading"})),n(bt({todolistId:a,taskId:t,entityStatus:"loading"})),ot(a,t,o).then((function(i){i.data.resultCode===F.success?(n(ft({taskId:t,status:e,todolistId:a})),n(bt({todolistId:a,taskId:t,entityStatus:"idle"}))):N(i.data,n)})).catch((function(t){P(t,n)})).finally((function(){n(W({status:"idle"}))}))}}}(t,e,n))}),[a]),b=Object(n.useCallback)((function(t,e,n){a(function(t,e,a){return function(n,i){var s=i().tasks[a].find((function(e){return e.id===t}));if(s){var o={title:e,status:s.status,description:s.description,priority:s.priority,startDate:s.startDate,deadline:s.deadline};n(W({status:"loading"})),n(bt({todolistId:a,taskId:t,entityStatus:"loading"})),ot(a,t,o).then((function(){n(jt({taskId:t,title:e,todolistId:a})),n(W({status:"succeeded"})),n(bt({todolistId:a,taskId:t,entityStatus:"idle"}))})).catch((function(t){P(t,n)}))}}}(t,e,n))}),[a]),h=Object(n.useCallback)((function(t){var e;a((e=t,function(t){t(et({id:e,entityStatus:"loading"})),t(W({status:"loading"})),L(e).then((function(a){a.data.resultCode===F.success?(t(W({status:"succeeded"})),t(V({todolistId:e}))):N(a.data,t)})).catch((function(e){P(e,t)}))}))}),[a]),p=Object(n.useCallback)((function(t){a(function(t){return function(e){e(W({status:"loading"})),w(t).then((function(t){t.data.resultCode===F.success?(e(Q({todolist:t.data.data.item})),e(W({status:"succeeded"}))):N(t.data,e)})).catch((function(t){P(t,e)}))}}(t))}),[a]),m=t.map((function(t){return Object(f.jsx)(mt.a,{item:!0,children:Object(f.jsx)(gt.a,{elevation:8,style:{padding:"20px"},children:Object(f.jsx)(pt,{id:t.id,title:t.title,entityStatus:t.entityStatus,tasks:e[t.id],removeTask:d,changeFilter:r,addTask:c,filter:t.filter,changeTaskStatus:j,removeTodolist:h,changeTasksTitle:b,changeTodolistTitle:l},t.id)})})}));return s?Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(Dt,{}),Object(f.jsxs)(xt.a,{position:"static",children:[Object(f.jsxs)(yt.a,{style:{justifyContent:"space-between"},children:[Object(f.jsx)(u.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(f.jsx)(It.a,{})}),Object(f.jsx)(O.a,{variant:"h6",children:"Todolists"}),o&&Object(f.jsx)(g.a,{color:"inherit",variant:"outlined",onClick:function(){a((function(t){t(W({status:"loading"})),S().then((function(e){0===e.data.resultCode?(t(B({value:!1})),t(W({status:"succeeded"}))):N(e.data,t)})).catch((function(e){P(e,t)}))}))},children:"Log out"})]}),"loading"===i&&Object(f.jsx)(Ct.a,{color:"secondary"})]}),Object(f.jsx)(vt.a,{fixed:!0,children:Object(f.jsxs)(Nt.d,{children:[Object(f.jsx)(Nt.b,{path:"/",element:Object(f.jsx)(Pt,{addTodolist:p,todoListsComponents:m})}),Object(f.jsx)(Nt.b,{path:"/login",element:Object(f.jsx)(Kt,{})}),Object(f.jsx)(Nt.b,{path:"/404",element:Object(f.jsx)("h1",{children:"404: PAGE NOT FOUND"})}),Object(f.jsx)(Nt.b,{path:"*",element:Object(f.jsx)(Nt.a,{to:"404"})})]})})]}):Object(f.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(f.jsx)(kt.a,{})})},Wt=a(45);o.a.render(Object(f.jsx)(Ot.a,{store:wt,children:Object(f.jsx)(Wt.a,{children:Object(f.jsx)(Mt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[128,1,2]]]);
//# sourceMappingURL=main.5e628bfe.chunk.js.map