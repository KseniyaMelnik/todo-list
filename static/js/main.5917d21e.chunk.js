(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{102:function(t,e,a){},103:function(t,e,a){},131:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),s=a(10),c=a.n(s);a(102),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(103);var o,r,d=a(24),l=a(182),u=a(169),f=a(170),j=a(3),b=i.a.memo((function(t){var e=Object(n.useState)(""),a=Object(d.a)(e,2),i=a[0],s=a[1],c=Object(n.useState)(!1),o=Object(d.a)(c,2),r=o[0],b=o[1],h=function(){var e=i.trim();e?(t.addItem(e),s("")):b(!0)},p=r&&Object(j.jsx)("div",{style:{color:"red"},children:"Title is required!"});return Object(j.jsxs)("div",{children:[Object(j.jsx)(l.a,{size:"small",variant:"outlined",error:!!r,value:i,placeholder:"Enter title...",onChange:function(t){b(!1),s(t.currentTarget.value)},onKeyPress:function(t){!1!==r&&b(!1),"Enter"===t.key&&h()},label:"Title",helperText:p,disabled:t.disabled}),Object(j.jsx)(u.a,{onClick:h,color:"primary",size:"small",disabled:t.disabled,children:Object(j.jsx)(f.a,{fontSize:"large"})})]})})),h=i.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),i=a[0],s=a[1],c=Object(n.useState)(t.title),o=Object(d.a)(c,2),r=o[0],u=o[1];return i?Object(j.jsx)(l.a,{style:{width:"150px"},value:r,autoFocus:!0,onBlur:function(){s(!1),t.setNewTitle(r)},onChange:function(t){u(t.currentTarget.value)}}):Object(j.jsx)("span",{onDoubleClick:function(){!t.disabled&&s(!0)},children:t.title})})),p=a(133),O=a(188),g=a(172),m=a(134),k=a(171),x=a(184),y=a(58),v=a.n(y),C=v.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"1860b8e8-5b0f-42e3-b73c-7abd28b78fff"}}),I=function(t){return C.post("/auth/login",t)},T=function(){return C.get("/auth/me")},w=function(){return C.delete("/auth/login")},S=function(){return C.get("todo-lists")},A=function(t){return C.post("todo-lists",{title:t})},E=function(t){return C.delete("todo-lists/".concat(t))},L=function(t,e){return C.put("todo-lists/".concat(t),{title:e})};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var F,z=i.a.memo((function(t){var e=t.task,a=t.removeTask,i=t.changeTaskStatus,s=t.changeTasksTitle,c=t.todolistId,r=Object(n.useCallback)((function(t){var a=t.currentTarget.checked;i(e.id,a?o.Completed:o.New,c)}),[e.id,c]),d=Object(n.useCallback)((function(t){s(e.id,t)}),[s,e.id]),l="loading"===e.entityStatus;return Object(j.jsxs)("div",{className:e.status===o.Completed?"is-done":"",children:[Object(j.jsx)(x.a,{color:"primary",onChange:r,checked:e.status===o.Completed,disabled:l}),Object(j.jsx)(h,{setNewTitle:d,title:e.title,disabled:l}),Object(j.jsx)(u.a,{onClick:function(){return a(e.id)},disabled:l,children:Object(j.jsx)(k.a,{fontSize:"small"})})]},e.id)})),D=a(14),N=a(28),P=a.n(N),R=a(43),U=function(t,e){t.messages.length?e($({error:t.messages[0]})):e($({error:"Some error occurred"})),e(Y({status:"failed"}))},W=function(t,e){e($({error:t.message})),e(Y({status:"failed"}))},q=a(23),B=Object(q.b)("auth/login",function(){var t=Object(R.a)(P.a.mark((function t(e,a){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(Y({status:"loading"})),t.prev=1,t.next=4,I(e);case 4:if(0!==(n=t.sent).data.resultCode){t.next=10;break}return a.dispatch(Y({status:"succeeded"})),t.abrupt("return",{isLoggedIn:!0});case 10:return U(n.data,a.dispatch),t.abrupt("return",a.rejectWithValue({errors:n.data.messages,fieldsErrors:n.data.fieldsErrors}));case 12:t.next=18;break;case 14:return t.prev=14,t.t0=t.catch(1),W(t.t0,a.dispatch),t.abrupt("return",a.rejectWithValue({errors:t.t0.message,fieldsErrors:void 0}));case 18:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e,a){return t.apply(this,arguments)}}()),H=Object(q.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}},extraReducers:function(t){t.addCase(B.fulfilled,(function(t,e){t.isLoggedIn=e.payload.isLoggedIn}))}}),K=H.reducer,M=H.actions.setIsLoggedInAC,V=Object(q.c)({name:"app",initialState:{status:"loading",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setIsInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),Z=V.reducer,J=V.actions,Y=J.setAppStatusAC,$=J.setAppErrorAC,_=J.setIsInitializedAC,G=Object(q.c)({name:"todolists",initialState:[],reducers:{setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(D.a)(Object(D.a)({},t),{},{filter:"all",entityStatus:"idle"})}))},RemoveTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));a>-1&&t.splice(a,1)},AddTodoListAC:function(t,e){t.unshift(Object(D.a)(Object(D.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},ChangeTodolistTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].title=e.payload.title},ChangeTodoListFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].filter=e.payload.filter},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.entityStatus}}}),Q=G.reducer,X=G.actions,tt=X.setTodolistsAC,et=X.RemoveTodolistAC,at=X.AddTodoListAC,nt=X.ChangeTodolistTitleAC,it=X.ChangeTodoListFilterAC,st=X.changeTodolistEntityStatusAC,ct=v.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"1860b8e8-5b0f-42e3-b73c-7abd28b78fff"}}),ot=function(t){return ct.get("/todo-lists/".concat(t,"/tasks"))},rt=function(t,e){return ct.post("/todo-lists/".concat(t,"/tasks"),{title:e})},dt=function(t,e){return ct.delete("/todo-lists/".concat(t,"/tasks/").concat(e))},lt=function(t,e,a){return ct.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},ut=Object(q.b)("tasks/fetchTasks",function(){var t=Object(R.a)(P.a.mark((function t(e,a){var n,i;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dispatch(Y({status:"loading"})),t.next=3,ot(e);case 3:return n=t.sent,i=n.data.items,a.dispatch(Y({status:"succeeded"})),t.abrupt("return",{tasks:i,todolistId:e});case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),ft=Object(q.b)("tasks/removeTask",(function(t,e){return e.dispatch(Y({status:"loading"})),e.dispatch(gt({taskId:t.taskId,entityStatus:"loading",todolistId:t.todolistId})),dt(t.todolistId,t.taskId).then((function(a){return e.dispatch(Y({status:"succeeded"})),{taskID:t.taskId,todolistId:t.todolistId}}))})),jt=Object(q.c)({name:"tasks",initialState:{},reducers:{addTaskAC:function(t,e){t[e.payload.todoListId].unshift(Object(D.a)(Object(D.a)({},e.payload),{},{entityStatus:"idle"}))},changeTaskTitleAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(D.a)(Object(D.a)({},a[n]),{},{title:e.payload.title}))},changeTaskStatusAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(D.a)(Object(D.a)({},a[n]),{},{status:e.payload.status}))},changeTaskEntityStatusAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(D.a)(Object(D.a)({},a[n]),{},{entityStatus:e.payload.entityStatus}))}},extraReducers:function(t){t.addCase(at,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(et,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(tt,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))})),t.addCase(ut.fulfilled,(function(t,e){t[e.payload.todolistId]=e.payload.tasks.map((function(t){return Object(D.a)(Object(D.a)({},t),{},{entityStatus:"idle"})}))})),t.addCase(ft.fulfilled,(function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskID}));n>-1&&a.splice(n,1)}))}}),bt=jt.actions,ht=bt.addTaskAC,pt=bt.changeTaskTitleAC,Ot=bt.changeTaskStatusAC,gt=bt.changeTaskEntityStatusAC,mt=jt.reducer;!function(t){t[t.success=0]="success",t[t.error=1]="error",t[t.captcha=10]="captcha"}(F||(F={}));var kt=a(17),xt=i.a.memo((function(t){var e=Object(kt.b)();Object(n.useEffect)((function(){e(ut(t.id))}),[]);var a=t.tasks;"active"===t.filter&&(a=a.filter((function(t){return t.status===o.New}))),"completed"===t.filter&&(a=a.filter((function(t){return t.status===o.Completed})));var i=Object(n.useCallback)((function(e){t.addTask(e,t.id)}),[t.addTask,t.id]),s=Object(n.useCallback)((function(e){t.removeTask(e,t.id)}),[t.removeTask,t.id]),c=Object(n.useCallback)((function(e,a){t.changeTaskStatus(e,a,t.id)}),[t.changeTaskStatus,t.id]),r=Object(n.useCallback)((function(e,a){t.changeTasksTitle(e,a,t.id)}),[t.changeTasksTitle,t.id]),d=a.map((function(e){return Object(j.jsx)(z,{task:e,removeTask:s,changeTaskStatus:c,changeTasksTitle:r,todolistId:t.id})})),l=Object(n.useCallback)((function(){return t.changeFilter("all",t.id)}),[t.changeFilter,t.id]),f=Object(n.useCallback)((function(){return t.changeFilter("active",t.id)}),[t.changeFilter,t.id]),x=Object(n.useCallback)((function(){return t.changeFilter("completed",t.id)}),[t.changeFilter,t.id]),y="all"===t.filter?"secondary":"primary",v="active"===t.filter?"secondary":"primary",C="completed"===t.filter?"secondary":"primary",I=Object(n.useCallback)((function(e){t.changeTodolistTitle(e,t.id)}),[t.changeTodolistTitle,t.id]);return Object(j.jsxs)("div",{children:[Object(j.jsxs)(p.a,{align:"center",variant:"h6",style:{fontWeight:"bold"},children:[Object(j.jsx)(h,{title:t.title,setNewTitle:I,disabled:"loading"===t.entityStatus}),Object(j.jsx)(u.a,{onClick:function(){t.removeTodolist(t.id)},disabled:"loading"===t.entityStatus,children:Object(j.jsx)(k.a,{})})]}),Object(j.jsx)(b,{addItem:i,disabled:"loading"===t.entityStatus}),Object(j.jsx)(O.a,{children:d}),Object(j.jsx)("div",{children:Object(j.jsxs)(g.a,{variant:"contained",size:"small",disableElevation:!0,children:[Object(j.jsx)(m.a,{color:y,onClick:l,children:"All"}),Object(j.jsx)(m.a,{color:v,onClick:f,children:"Active"}),Object(j.jsx)(m.a,{color:C,onClick:x,children:"Completed"})]})})]})})),yt=a(173),vt=a(132),Ct=a(176),It=a(177),Tt=a(178),wt=a(180),St=a(181),At=a(179),Et=(a(129),a(26)),Lt=a(50),Ft=Object(Et.b)({tasks:mt,todolists:Q,app:Z,auth:K}),zt=Object(q.a)({reducer:Ft,middleware:function(t){return t().prepend(Lt.a)}}),Dt=kt.c;window.store=zt;var Nt=a(186),Pt=a(183),Rt=i.a.forwardRef((function(t,e){return Object(j.jsx)(Pt.a,Object(D.a)({elevation:6,ref:e,variant:"filled"},t))}));function Ut(){var t=Dt((function(t){return t.app.error})),e=Object(kt.b)(),a=function(t,a){"clickaway"!==a&&e($({error:null}))};return Object(j.jsx)(Nt.a,{open:null!==t,autoHideDuration:6e3,onClose:a,children:Object(j.jsx)(Rt,{onClose:a,severity:"error",children:t})})}var Wt=a(8),qt=function(t){var e=Object(kt.c)((function(t){return t.auth.isLoggedIn})),a=Object(kt.b)();return Object(n.useEffect)((function(){e&&a((function(t){t(Y({status:"loading"})),S().then((function(e){t(tt({todolists:e.data})),t(Y({status:"succeeded"}))})).catch((function(e){W(e,t)}))}))}),[]),e?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(yt.a,{container:!0,style:{padding:"29px 0"},children:Object(j.jsx)(b,{addItem:t.addTodolist})}),Object(j.jsx)(yt.a,{container:!0,spacing:4,children:t.todoListsComponents})]}):Object(j.jsx)(Wt.a,{to:"/login"})},Bt=a(187),Ht=a(168),Kt=a(174),Mt=a(175),Vt=a(87),Zt=function(){var t=Object(kt.b)(),e=Object(kt.c)((function(t){return t.auth.isLoggedIn})),a=Object(Vt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required email",t.password?t.password.length<3&&(e.password="Invalid password"):e.password="Required password",e},onSubmit:function(){var e=Object(R.a)(P.a.mark((function e(a,n){var i,s,c,o,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(B(a));case 2:i=e.sent,B.rejected.match(i)&&(null===(s=i.payload)||void 0===s||null===(c=s.fieldsErrors)||void 0===c?void 0:c.length)&&(r=null===(o=i.payload)||void 0===o?void 0:o.fieldsErrors[0],n.setFieldError(r.field,r.error));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()});return e?Object(j.jsx)(Wt.a,{to:"/"}):Object(j.jsx)(yt.a,{container:!0,justifyContent:"center",children:Object(j.jsx)(yt.a,{item:!0,justifyContent:"center",children:Object(j.jsx)("form",{onSubmit:a.handleSubmit,children:Object(j.jsxs)(Bt.a,{children:[Object(j.jsxs)(Ht.a,{children:[Object(j.jsxs)("p",{children:["To log in get registered",Object(j.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:" here"})]}),Object(j.jsx)("p",{children:"or use common test account credentials:"}),Object(j.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(j.jsx)("p",{children:"Password: free"})]}),Object(j.jsxs)(Kt.a,{children:[Object(j.jsx)(l.a,Object(D.a)({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?Object(j.jsx)("div",{style:{color:"red"},children:a.errors.email}):null,Object(j.jsx)(l.a,Object(D.a)({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?Object(j.jsx)("div",{style:{color:"red"},children:a.errors.password}):null,Object(j.jsx)(Mt.a,{label:"Remember me",control:Object(j.jsx)(x.a,{})}),Object(j.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})};var Jt=function(){Object(n.useEffect)((function(){a((function(t){T().then((function(e){0===e.data.resultCode&&t(M({value:!0}))})).finally((function(){t(_({isInitialized:!0}))}))}))}),[]);var t=Object(kt.c)((function(t){return t.todolists})),e=Object(kt.c)((function(t){return t.tasks})),a=Object(kt.b)(),i=Dt((function(t){return t.app.status})),s=Dt((function(t){return t.app.isInitialized})),c=Dt((function(t){return t.auth.isLoggedIn})),o=Object(n.useCallback)((function(t,e){a(function(t,e){return function(a){a(Y({status:"loading"})),rt(t,e).then((function(t){if(t.data.resultCode===F.success){var e=t.data.data.item;a(ht(e))}else U(t.data,a)})).catch((function(t){W(t,a)})).finally((function(){a(Y({status:"idle"}))}))}}(e,t))}),[a]),r=Object(n.useCallback)((function(t,e){a(ft({todolistId:e,taskId:t}))}),[a]),d=Object(n.useCallback)((function(t,e){a(it({filter:t,todolistId:e}))}),[a]),l=Object(n.useCallback)((function(t,e){a(function(t,e){return function(a){a(Y({status:"loading"})),L(t,e).then((function(n){n.data.resultCode===F.success?(a(nt({todolistId:t,title:e})),a(Y({status:"succeeded"}))):U(n.data,a)})).catch((function(t){W(t,a)}))}}(e,t))}),[a]),f=Object(n.useCallback)((function(t,e,n){a(function(t,e,a){return function(n,i){var s=i().tasks[a].find((function(e){return e.id===t}));if(s){var c={title:s.title,status:e,description:s.description,priority:s.priority,startDate:s.startDate,deadline:s.deadline};n(Y({status:"loading"})),n(gt({todolistId:a,taskId:t,entityStatus:"loading"})),lt(a,t,c).then((function(i){i.data.resultCode===F.success?(n(Ot({taskId:t,status:e,todolistId:a})),n(gt({todolistId:a,taskId:t,entityStatus:"idle"}))):U(i.data,n)})).catch((function(t){W(t,n)})).finally((function(){n(Y({status:"idle"}))}))}}}(t,e,n))}),[a]),b=Object(n.useCallback)((function(t,e,n){a(function(t,e,a){return function(n,i){var s=i().tasks[a].find((function(e){return e.id===t}));if(s){var c={title:e,status:s.status,description:s.description,priority:s.priority,startDate:s.startDate,deadline:s.deadline};n(Y({status:"loading"})),n(gt({todolistId:a,taskId:t,entityStatus:"loading"})),lt(a,t,c).then((function(){n(pt({taskId:t,title:e,todolistId:a})),n(Y({status:"succeeded"})),n(gt({todolistId:a,taskId:t,entityStatus:"idle"}))})).catch((function(t){W(t,n)}))}}}(t,e,n))}),[a]),h=Object(n.useCallback)((function(t){var e;a((e=t,function(t){t(st({id:e,entityStatus:"loading"})),t(Y({status:"loading"})),E(e).then((function(a){a.data.resultCode===F.success?(t(Y({status:"succeeded"})),t(et({todolistId:e}))):U(a.data,t)})).catch((function(e){W(e,t)}))}))}),[a]),O=Object(n.useCallback)((function(t){a(function(t){return function(e){e(Y({status:"loading"})),A(t).then((function(t){t.data.resultCode===F.success?(e(at({todolist:t.data.data.item})),e(Y({status:"succeeded"}))):U(t.data,e)})).catch((function(t){W(t,e)}))}}(t))}),[a]),g=t.map((function(t){return Object(j.jsx)(yt.a,{item:!0,children:Object(j.jsx)(vt.a,{elevation:8,style:{padding:"20px"},children:Object(j.jsx)(xt,{id:t.id,title:t.title,entityStatus:t.entityStatus,tasks:e[t.id],removeTask:r,changeFilter:d,addTask:o,filter:t.filter,changeTaskStatus:f,removeTodolist:h,changeTasksTitle:b,changeTodolistTitle:l},t.id)})})}));return s?Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(Ut,{}),Object(j.jsxs)(It.a,{position:"static",children:[Object(j.jsxs)(Tt.a,{style:{justifyContent:"space-between"},children:[Object(j.jsx)(u.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(j.jsx)(At.a,{})}),Object(j.jsx)(p.a,{variant:"h6",children:"Todolists"}),c&&Object(j.jsx)(m.a,{color:"inherit",variant:"outlined",onClick:function(){a((function(t){t(Y({status:"loading"})),w().then((function(e){0===e.data.resultCode?(t(M({value:!1})),t(Y({status:"succeeded"}))):U(e.data,t)})).catch((function(e){W(e,t)}))}))},children:"Log out"})]}),"loading"===i&&Object(j.jsx)(wt.a,{color:"secondary"})]}),Object(j.jsx)(St.a,{fixed:!0,children:Object(j.jsxs)(Wt.d,{children:[Object(j.jsx)(Wt.b,{path:"/",element:Object(j.jsx)(qt,{addTodolist:O,todoListsComponents:g})}),Object(j.jsx)(Wt.b,{path:"/login",element:Object(j.jsx)(Zt,{})}),Object(j.jsx)(Wt.b,{path:"/404",element:Object(j.jsx)("h1",{children:"404: PAGE NOT FOUND"})}),Object(j.jsx)(Wt.b,{path:"*",element:Object(j.jsx)(Wt.a,{to:"404"})})]})})]}):Object(j.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(j.jsx)(Ct.a,{})})},Yt=a(47);c.a.render(Object(j.jsx)(kt.a,{store:zt,children:Object(j.jsx)(Yt.a,{children:Object(j.jsx)(Jt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.5917d21e.chunk.js.map